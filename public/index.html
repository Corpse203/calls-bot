<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calls Viewer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }
    .fade-out {
      opacity: 0;
      transform: translateX(40px);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* 📱 Mobile responsive tweak */
    @media (max-width: 500px) {
      #viewerForm input,
      #viewerForm button,
      #loginForm input,
      #loginForm button,
      #logoutBtn,
      #resetBtn {
        font-size: 12px !important;
        padding: 8px !important;
      }
      h1 {
        font-size: 1.5rem !important;
      }
      #adminStatus {
        font-size: 12px !important;
        padding: 4px 8px !important;
      }
      #callList li {
        flex-direction: column !important;
        align-items: flex-start !important;
      }
      #callList button {
        margin-top: 6px;
        width: 100%;
      }
    }
  </style>
</head>
<body class="flex flex-col justify-between min-h-screen bg-gradient-to-b from-gray-950 to-gray-900 text-white p-6 font-sans relative">

  <!-- ✅ Notification toast -->
  <div id="notif" class="fixed top-4 left-1/2 -translate-x-1/2 bg-green-600 text-white px-4 py-2 rounded shadow hidden z-50">
    Call ajouté avec succès ✅
  </div>

  <!-- ✅ Badge admin status -->
  <div id="adminStatus" class="fixed top-2 right-4 text-sm px-3 py-1 rounded-full font-medium shadow bg-red-600 text-white z-50">
    🔒 Non connecté
  </div>

  <div class="max-w-2xl mx-auto text-center">
    <h1 class="text-4xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-500 to-indigo-400">
      🎰 Liste des Calls - DLive
    </h1>

    <!-- 📊 Compteur des calls -->
    <div id="callCounter" class="text-sm text-gray-400 mb-4"></div>

    <!-- 🎯 Formulaire PUBLIC -->
    <div id="viewerForm" class="mb-8 bg-black/20 p-4 rounded-lg shadow-inner">
      <h2 class="text-xl font-bold mb-2 text-white">📩 Proposer une machine</h2>
      <form onsubmit="submitViewerCall(event)" class="flex flex-col md:flex-row gap-2 justify-center">
        <div class="relative w-full md:w-auto">
          <input id="slotInput" type="text" placeholder="Nom de la slot"
                 class="pl-10 p-2 rounded bg-gray-800 text-white border border-gray-700 focus:ring focus:ring-blue-500 w-full" required />
          <span class="absolute left-3 top-2.5 text-gray-400">🎰</span>
        </div>
        <div class="relative w-full md:w-auto">
          <input id="userInput" type="text" placeholder="Ton pseudo"
                 class="pl-10 p-2 rounded bg-gray-800 text-white border border-gray-700 focus:ring focus:ring-blue-500 w-full" required />
          <span class="absolute left-3 top-2.5 text-gray-400">👤</span>
        </div>
        <button type="submit"
                class="bg-green-500 hover:bg-green-600 px-4 py-2 rounded font-semibold transition">
          Envoyer
        </button>
      </form>
    </div>

    <!-- 🔐 Zone admin -->
    <div id="loginForm" class="mb-6 hidden">
      <input id="passwordInput" type="password" placeholder="Mot de passe admin"
             class="p-2 rounded bg-gray-800 text-white border border-gray-700 focus:ring-2 focus:ring-blue-500"/>
      <button onclick="login()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 ml-2 rounded transition">Connexion</button>
    </div>

    <button id="logoutBtn" onclick="logout()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded mb-4 hidden transition">Se déconnecter</button>
    <button id="resetBtn" onclick="resetCalls()" class="bg-yellow-500 hover:bg-yellow-600 px-4 py-2 rounded mb-6 text-black font-semibold transition hidden">
      🧽 Vider la liste
    </button>

    <!-- 📋 Liste des calls -->
    <ul id="callList" class="space-y-4 mt-4"></ul>
  </div>

  <!-- 👣 Footer personnalisé -->
  <footer class="mt-16 text-center text-sm text-gray-400 hover:text-white transition-opacity opacity-70">
    Développé avec ❤️ par <span class="text-purple-400 font-semibold">Browkse</span>
  </footer>

  <!-- Le script JS reste identique -->
</body>
</html>
