<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ† Rainbet â€” Podium & Top 10</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
@keyframes championGlow {
  0%,100% { box-shadow: 0 0 25px rgba(255,200,60,.25); }
  50% { box-shadow: 0 0 45px rgba(255,200,60,.45); }
}
.glow-champion { animation: championGlow 4s ease-in-out infinite; }

.fade-up { animation: fadeUp .6s ease-out both; }
@keyframes fadeUp {
  from { opacity:0; transform: translateY(20px); }
  to { opacity:1; transform:none; }
}
</style>
</head>

<body class="min-h-screen text-white p-6
bg-[radial-gradient(circle_at_top,_rgba(255,215,100,0.12),transparent_55%)]
bg-gradient-to-br from-[#0b1220] via-[#020617] to-black">

<div class="max-w-5xl mx-auto">

<!-- HEADER -->
<div class="text-center mb-12">
  <h1 class="text-4xl font-extrabold tracking-tight">ğŸ† PODIUM & TOP 10</h1>
  <p class="text-gray-400 mt-1">Classement officiel Rainbet</p>
  <p class="text-gray-500 mt-1 text-sm">
    ğŸ“… 09 janvier 2026 â†’ 07 fÃ©vrier 2026
  </p>
</div>

<!-- PODIUM -->
<div class="grid grid-cols-3 gap-6 items-end mb-14">

<!-- ğŸ¥ˆ DeuxiÃ¨me -->
<div class="fade-up">
  <div class="h-[180px] rounded-xl bg-white/10 p-4 flex flex-col justify-end text-center">
    <div class="text-xl">ğŸ¥ˆ</div>
    <div id="p2-name" class="font-bold mt-1">â€”</div>
    <div id="p2-wager" class="text-sm text-gray-300">â€”</div>
    <div class="text-xs text-gray-400 mt-1">DeuxiÃ¨me - 300$</div>
  </div>
</div>

<!-- ğŸ¥‡ Premier -->
<div class="fade-up">
  <div class="h-[230px] rounded-xl p-4 flex flex-col justify-end text-center
  bg-yellow-500/20 border border-yellow-400 glow-champion">
    <div class="text-2xl">ğŸ¥‡</div>
    <div id="p1-name" class="font-extrabold text-lg mt-1">â€”</div>
    <div id="p1-wager" class="text-sm text-yellow-200">â€”</div>
    <div class="text-xs text-yellow-300 mt-1">Premier - 500$</div>
  </div>
</div>

<!-- ğŸ¥‰ TroisiÃ¨me -->
<div class="fade-up">
  <div class="h-[160px] rounded-xl bg-white/10 p-4 flex flex-col justify-end text-center">
    <div class="text-xl">ğŸ¥‰</div>
    <div id="p3-name" class="font-bold mt-1">â€”</div>
    <div id="p3-wager" class="text-sm text-gray-300">â€”</div>
    <div class="text-xs text-gray-400 mt-1">TroisiÃ¨me - 200$</div>
  </div>
</div>

</div>

<!-- TABLE -->
<div class="rounded-2xl overflow-hidden border border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl">
<table class="w-full text-sm">
<thead class="bg-white/10 text-gray-300">
<tr>
  <th class="px-4 py-3">#</th>
  <th class="px-4 py-3 text-left">Joueur</th>
  <th class="px-4 py-3 text-right">Wager</th>
</tr>
</thead>
<tbody id="tbody" class="divide-y divide-white/10"></tbody>
</table>
</div>

<!-- FOOTER -->
<div class="text-center text-xs text-gray-400 mt-4">
  DerniÃ¨re mise Ã  jour :
  <span id="updatedAt" class="font-semibold">â€”</span>
  â€¢ RafraÃ®chissement dans
  <span id="countdown" class="font-semibold">60</span>s
</div>

</div>

<script>
const START_AT="2026-01-09";
const END_AT="2026-02-07";

const tbody=document.getElementById("tbody");
const updatedAt=document.getElementById("updatedAt");
const countdown=document.getElementById("countdown");

const p1n=document.getElementById("p1-name");
const p1w=document.getElementById("p1-wager");
const p2n=document.getElementById("p2-name");
const p2w=document.getElementById("p2-wager");
const p3n=document.getElementById("p3-name");
const p3w=document.getElementById("p3-wager");

function f(n){
  return Number(n).toLocaleString("fr-FR",{
    style: "currency",
    currency: "USD",
    minimumFractionDigits: 2,
    maximumFractionDigits: 2
  });
}

async function load(){
  const res=await fetch(`/api/rainbet/public-top?start_at=${START_AT}&end_at=${END_AT}`);
  const data=await res.json();
  if(!res.ok) return;

  const rows=data.top10;
  tbody.innerHTML="";

  if(rows[0]){
    p1n.textContent=rows[0].username;
    p1w.textContent=f(rows[0].wagered_amount);
  }
  if(rows[1]){
    p2n.textContent=rows[1].username;
    p2w.textContent=f(rows[1].wagered_amount);
  }
  if(rows[2]){
    p3n.textContent=rows[2].username;
    p3w.textContent=f(rows[2].wagered_amount);
  }

  rows.forEach(r=>{
    const medal=r.rank===1?"ğŸ¥‡":r.rank===2?"ğŸ¥ˆ":r.rank===3?"ğŸ¥‰":r.rank;
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td class="px-4 py-3 font-bold">${medal}</td>
      <td class="px-4 py-3 font-semibold">${r.username}</td>
      <td class="px-4 py-3 text-right tabular-nums">${f(r.wagered_amount)}</td>
    `;
    tbody.appendChild(tr);
  });

  updatedAt.textContent=data.updated_at||"â€”";
}

let sec=60;
setInterval(()=>{sec--;if(sec<=0)sec=60;countdown.textContent=sec;},1000);
load();
setInterval(()=>{sec=60;load();},60000);
</script>
</body>
</html>
